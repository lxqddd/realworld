(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{199:function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"i",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"h",(function(){return f})),r.d(t,"f",(function(){return v})),r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return h})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return w}));var n=r(66),o=function(){return n.b.get("/api/tags")},c=function(article){return n.b.post("api/articles",{article:article})},l=function(e){return n.b.get("api/articles?limit=".concat(e.limit,"&offset=").concat(e.offset))},f=function(e){return n.b.get("/api/articles/feed?limit=".concat(e.limit,"&offset=").concat(e.offset))},v=function(e){return n.b.get("api/articles?limit=".concat(e.limit,"&offset=").concat(e.offset,"&tag=").concat(e.tag))},d=function(e){return n.b.post("/api/articles/".concat(e,"/favorite"))},h=function(e){return n.b.delete("/api/articles/".concat(e,"/favorite"))},m=function(e){return n.b.get("/api/articles/".concat(e))},w=function(e){return n.b.get("/api/articles/".concat(e,"/comments"))}},200:function(e,t,r){var content=r(202);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(89).default)("d18363dc",content,!0,{sourceMap:!1})},201:function(e,t,r){"use strict";r(200)},202:function(e,t,r){var n=r(88)(!1);n.push([e.i,".pager>a[data-v-7a6ad211],.pager>div[data-v-7a6ad211],.pager>select[data-v-7a6ad211],.pager>span[data-v-7a6ad211]{float:left;margin-left:10px}.pager[data-v-7a6ad211]{width:600px;height:48px;line-height:48px;margin:10px auto 40px}.pager input[data-v-7a6ad211],.pager select[data-v-7a6ad211]{height:38px;line-height:38px;outline:none;border:1px solid #888;padding:0 10px;box-sizing:border-box;border-radius:5px}.pager input[data-v-7a6ad211]{width:50px}.pager .goto[data-v-7a6ad211]{margin-left:16px}.pager a[data-v-7a6ad211]{color:#000;font-weight:700;text-decoration:none}",""]),e.exports=n},205:function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return v}));var n=r(66),o=function(e){return n.b.get("/api/profiles/".concat(e))},c=function(e){return n.b.post("api/profiles/".concat(e,"/follow"))},l=function(e){return n.b.delete("api/profiles/".concat(e,"/follow"))},f=function(e){return n.b.get("api/articles?author=".concat(e.authorName,"&limit=").concat(e.pageSize,"&offset=").concat(e.offset))},v=function(e){return n.b.get("api/articles?favorited=".concat(e.username,"&limit=").concat(e.pageSize,"&offset=").concat(e.offset))}},206:function(e,t,r){"use strict";var n={name:"Pagination",props:["pageSize","curPage","total"],data:function(){return{gotoPage:"",offset:this.pageSize}},computed:{showFirstPage:function(){return this.curPage>1},showPrevPage:function(){return this.curPage>1},showLastPage:function(){return this.curPage<this.total},showNextPage:function(){return this.curPage<this.total}},watch:{offset:"offsetChanged"},mounted:function(){var e=this;this.$nextTick((function(){e.initPager()}))},methods:{initPager:function(){this.gotoPage=""},nextPage:function(){this.$emit("setPage",this.curPage+1)},prevPage:function(){this.$emit("setPage",this.curPage-1)},gotoNextPage:function(){if(this.gotoPage&&/[1-9][0-9]*/.test(this.gotoPage)){var e=parseInt(this.gotoPage);e>0&&e<=this.pageSize?this.$emit("setPage",e):this.gotoPage=""}else this.gotoPage=""},firstPage:function(){this.$emit("setPage",1)},lastPage:function(){this.$emit("setPage",this.total)},offsetChanged:function(){this.$emit("setOffset",this.offset)}}},o=(r(201),r(30)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pager"},[r("button",{directives:[{name:"show",rawName:"v-show",value:e.showFirstPage,expression:"showFirstPage"}],staticClass:"btn btn-primary",on:{click:e.firstPage}},[e._v("\n    首页\n  ")]),e._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:e.showPrevPage,expression:"showPrevPage"}],staticClass:"btn btn-primary",on:{click:e.prevPage}},[e._v("\n    上一页\n  ")]),e._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:e.showNextPage,expression:"showNextPage"}],staticClass:"btn btn-primary",on:{click:e.nextPage}},[e._v("\n    下一页\n  ")]),e._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:e.showLastPage,expression:"showLastPage"}],staticClass:"btn btn-primary",on:{click:e.lastPage}},[e._v("\n    尾页\n  ")]),e._v(" "),r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:e.offset,expression:"offset"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.offset=t.target.multiple?r:r[0]}}},[r("option",{attrs:{selected:"selected",value:"10"}},[e._v("10")]),e._v(" "),r("option",{attrs:{value:"20"}},[e._v("20")]),e._v(" "),r("option",{attrs:{value:"50"}},[e._v("50")]),e._v(" "),r("option",{attrs:{value:"100"}},[e._v("100")])])]),e._v(" "),r("span",[e._v(e._s(e.total&&e.curPage)+"/"+e._s(e.total))]),e._v(" "),r("div",{staticClass:"goto"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.gotoPage,expression:"gotoPage"}],attrs:{type:"text"},domProps:{value:e.gotoPage},on:{input:function(t){t.target.composing||(e.gotoPage=t.target.value)}}}),e._v(" "),r("button",{staticClass:"btn btn-primary",staticStyle:{"margin-right":"4px"},on:{click:e.gotoNextPage}},[e._v("\n      跳转\n    ")])])])}),[],!1,null,"7a6ad211",null);t.a=component.exports},207:function(e,t,r){"use strict";var n=r(4),o=(r(36),r(199)),c={name:"ArticleItem",props:{article:{type:Object,default:function(){return{}}}},created:function(){this.$set(this.article,"disabled",!1)},methods:{jumpToProfile:function(e){this.$router.push({path:"/profile",query:{username:e}})},handleOrCancelFavorite:function(article){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.article.disabled){t.next=2;break}return t.abrupt("return");case 2:if(e.article.disabled=!0,!article.favorited){t.next=9;break}e.cancelFavoriteArticle(article.slug),article.favorited=!1,article.favoritesCount-=1,t.next=13;break;case 9:return t.next=11,e.favoriteArticle(article.slug);case 11:article.favorited=!0,article.favoritesCount+=1;case 13:e.article.disabled=!1;case 14:case"end":return t.stop()}}),t)})))()},favoriteArticle:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{Object(o.b)(e)}catch(e){console.error(e)}case 1:case"end":return t.stop()}}),t)})))()},cancelFavoriteArticle:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.a)(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},handlePreviewArticle:function(article){this.$router.push({path:"/article",query:{slug:article.slug}})}}},l=r(30),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"article-meta"},[r("div",{staticStyle:{display:"inline-block"},on:{click:function(t){return e.jumpToProfile(e.article.author.username)}}},[r("span",[r("img",{attrs:{src:e.article.author.image}})]),e._v(" "),r("div",{staticClass:"info"},[r("span",{staticClass:"author"},[e._v(e._s(e.article.author.username))]),e._v(" "),r("span",{staticClass:"date"},[e._v(e._s(e._f("date")(e.article.createdAt,"MMM DD,YYYY")))])])]),e._v(" "),r("button",{staticClass:"btn btn-sm btn-outline-primary pull-xs-right",class:e.article.favorited?"active":"",attrs:{disabled:e.article.disabled},on:{click:function(t){return e.handleOrCancelFavorite(e.article)}}},[r("i",{staticClass:"ion-heart"}),e._v(" "+e._s(e.article.favoritesCount)+"\n    ")])]),e._v(" "),r("div",{staticClass:"preview-link",on:{click:function(t){return e.handlePreviewArticle(e.article)}}},[r("h1",[e._v(e._s(e.article.title))]),e._v(" "),r("p",[e._v(e._s(e.article.description))]),e._v(" "),r("span",[e._v("Read more...")])])])}),[],!1,null,null,null);t.a=component.exports},211:function(e,t,r){"use strict";r.r(t);var n=r(4),o=(r(36),r(205)),c=r(206),l=r(207),f={name:"UserProfile",middleware:"authenticated",components:{Pagination:c.a,ArticleItem:l.a},data:function(){return{profileUserInfo:{},tabMap:{my:"My Articles",favo:"Favorited Articles"},curSelectTab:"My Articles",articles:[],articlesCount:0,curPage:0,pageSize:10,totalPages:0}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfileUserInfo();case 2:return t.next=4,e.initArticlesOfTab("My Articles",e.profileUserInfo.username);case 4:e.totalPages=Math.ceil(e.articlesCount/e.pageSize),e.$set(e.profileUserInfo,"disabledFollow",!1);case 6:case"end":return t.stop()}}),t)})))()},methods:{getProfileUserInfo:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.e)(e.$route.query.username);case 3:r=t.sent,n=r.profile,e.profileUserInfo=n,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleOrCancelFollow:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.profileUserInfo.disabledFollow){r.next=2;break}return r.abrupt("return");case 2:if(t.profileUserInfo.disabledFollow=!0,n=e.following,c=e.username,r.prev=4,!n){r.next=11;break}return r.next=8,Object(o.b)(c);case 8:e.following=!1,r.next=14;break;case 11:return r.next=13,Object(o.a)(c);case 13:e.following=!0;case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(4),console.error(r.t0);case 19:t.profileUserInfo.disabledFollow=!1;case 20:case"end":return r.stop()}}),r,null,[[4,16]])})))()},changeTab:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.curSelectTab=e,r.next=3,t.initArticlesOfTab(e,t.profileUserInfo.username,0,10);case 3:case"end":return r.stop()}}),r)})))()},initArticlesOfTab:function(e,t){var r=arguments,o=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=r.length>2&&void 0!==r[2]?r[2]:0,l=r.length>3&&void 0!==r[3]?r[3]:10,n.t0=e,n.next="My Articles"===n.t0?5:"Favorited Articles"===n.t0?8:11;break;case 5:return n.next=7,o.getMyArticles(t,c,l);case 7:return n.abrupt("break",11);case 8:return n.next=10,o.getFavoArticle(t,c,l);case 10:return n.abrupt("break",11);case 11:o.totalPages=Math.ceil(o.articlesCount/o.pageSize);case 12:case"end":return n.stop()}}),n)})))()},getMyArticles:function(e,t,r){var c=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var l,f,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(o.c)({authorName:e,offset:t,pageSize:r});case 3:l=n.sent,f=l.articles,v=l.articlesCount,c.articles=f,c.articlesCount=v,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},getFavoArticle:function(e,t,r){var c=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var l,f,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(o.d)({username:e,offset:t,pageSize:r});case 3:l=n.sent,f=l.articles,v=l.articlesCount,c.articles=f,c.articlesCount=v,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},setPage:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.curPage=e,console.log(t.curPage),r.next=4,t.initArticlesOfTab(t.curSelectTab,t.profileUserInfo.username,t.curPage);case 4:case"end":return r.stop()}}),r)})))()},setOffset:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.pageSize=e,t.curPage=1,r.next=4,t.initArticlesOfTab(t.curSelectTab,t.profileUserInfo.username,t.curPage-1,t.pageSize);case 4:case"end":return r.stop()}}),r)})))()}}},v=r(30),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile-page"},[r("div",{staticClass:"user-info"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[r("img",{staticClass:"user-img",attrs:{src:e.profileUserInfo.image}}),e._v(" "),r("h4",[e._v(e._s(e.profileUserInfo.username))]),e._v(" "),r("p",[e._v("\n            "+e._s(e.profileUserInfo.bio)+"\n          ")]),e._v(" "),r("button",{staticClass:"btn btn-sm btn-outline-secondary action-btn",attrs:{disabled:e.profileUserInfo.disabledFollow},on:{click:function(t){return e.handleOrCancelFollow(e.profileUserInfo)}}},[r("i",{staticClass:"ion-plus-round"}),e._v("\n             \n            "+e._s(e.profileUserInfo.following?"Unfollow "+e.profileUserInfo.username:"Follow "+e.profileUserInfo.username)+"\n          ")])])])])]),e._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[r("div",{staticClass:"articles-toggle"},[r("ul",{staticClass:"nav nav-pills outline-active"},e._l(e.tabMap,(function(t){return r("li",{key:t,staticClass:"nav-item",on:{click:function(r){return e.changeTab(t)}}},[t?r("span",{staticClass:"nav-link",class:e.curSelectTab===t&&"active"},[e._v(e._s(t))]):e._e()])})),0)]),e._v(" "),e._l(e.articles,(function(article){return r("div",{key:article.slug,staticClass:"article-preview"},[r("ArticleItem",{attrs:{article:article}})],1)}))],2),e._v(" "),r("Pagination",{attrs:{pageSize:e.pageSize,total:e.totalPages,curPage:e.curPage},on:{setPage:e.setPage,setOffset:e.setOffset}})],1)])])}),[],!1,null,null,null);t.default=component.exports}}]);