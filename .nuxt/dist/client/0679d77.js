(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{199:function(t,e,r){"use strict";r.d(e,"g",(function(){return c})),r.d(e,"i",(function(){return o})),r.d(e,"e",(function(){return l})),r.d(e,"h",(function(){return f})),r.d(e,"f",(function(){return v})),r.d(e,"b",(function(){return d})),r.d(e,"a",(function(){return h})),r.d(e,"c",(function(){return m})),r.d(e,"d",(function(){return x}));var n=r(66),c=function(){return n.b.get("/api/tags")},o=function(article){return n.b.post("api/articles",{article:article})},l=function(t){return n.b.get("api/articles?limit=".concat(t.limit,"&offset=").concat(t.offset))},f=function(t){return n.b.get("/api/articles/feed?limit=".concat(t.limit,"&offset=").concat(t.offset))},v=function(t){return n.b.get("api/articles?limit=".concat(t.limit,"&offset=").concat(t.offset,"&tag=").concat(t.tag))},d=function(t){return n.b.post("/api/articles/".concat(t,"/favorite"))},h=function(t){return n.b.delete("/api/articles/".concat(t,"/favorite"))},m=function(t){return n.b.get("/api/articles/".concat(t))},x=function(t){return n.b.get("/api/articles/".concat(t,"/comments"))}},200:function(t,e,r){var content=r(202);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(89).default)("d18363dc",content,!0,{sourceMap:!1})},201:function(t,e,r){"use strict";r(200)},202:function(t,e,r){var n=r(88)(!1);n.push([t.i,".pager>a[data-v-7a6ad211],.pager>div[data-v-7a6ad211],.pager>select[data-v-7a6ad211],.pager>span[data-v-7a6ad211]{float:left;margin-left:10px}.pager[data-v-7a6ad211]{width:600px;height:48px;line-height:48px;margin:10px auto 40px}.pager input[data-v-7a6ad211],.pager select[data-v-7a6ad211]{height:38px;line-height:38px;outline:none;border:1px solid #888;padding:0 10px;box-sizing:border-box;border-radius:5px}.pager input[data-v-7a6ad211]{width:50px}.pager .goto[data-v-7a6ad211]{margin-left:16px}.pager a[data-v-7a6ad211]{color:#000;font-weight:700;text-decoration:none}",""]),t.exports=n},206:function(t,e,r){"use strict";var n={name:"Pagination",props:["pageSize","curPage","total"],data:function(){return{gotoPage:"",offset:this.pageSize}},computed:{showFirstPage:function(){return this.curPage>1},showPrevPage:function(){return this.curPage>1},showLastPage:function(){return this.curPage<this.total},showNextPage:function(){return this.curPage<this.total}},watch:{offset:"offsetChanged"},mounted:function(){var t=this;this.$nextTick((function(){t.initPager()}))},methods:{initPager:function(){this.gotoPage=""},nextPage:function(){this.$emit("setPage",this.curPage+1)},prevPage:function(){this.$emit("setPage",this.curPage-1)},gotoNextPage:function(){if(this.gotoPage&&/[1-9][0-9]*/.test(this.gotoPage)){var t=parseInt(this.gotoPage);t>0&&t<=this.pageSize?this.$emit("setPage",t):this.gotoPage=""}else this.gotoPage=""},firstPage:function(){this.$emit("setPage",1)},lastPage:function(){this.$emit("setPage",this.total)},offsetChanged:function(){this.$emit("setOffset",this.offset)}}},c=(r(201),r(30)),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pager"},[r("button",{directives:[{name:"show",rawName:"v-show",value:t.showFirstPage,expression:"showFirstPage"}],staticClass:"btn btn-primary",on:{click:t.firstPage}},[t._v("\n    首页\n  ")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:t.showPrevPage,expression:"showPrevPage"}],staticClass:"btn btn-primary",on:{click:t.prevPage}},[t._v("\n    上一页\n  ")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:t.showNextPage,expression:"showNextPage"}],staticClass:"btn btn-primary",on:{click:t.nextPage}},[t._v("\n    下一页\n  ")]),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:t.showLastPage,expression:"showLastPage"}],staticClass:"btn btn-primary",on:{click:t.lastPage}},[t._v("\n    尾页\n  ")]),t._v(" "),r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:t.offset,expression:"offset"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.offset=e.target.multiple?r:r[0]}}},[r("option",{attrs:{selected:"selected",value:"10"}},[t._v("10")]),t._v(" "),r("option",{attrs:{value:"20"}},[t._v("20")]),t._v(" "),r("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),r("option",{attrs:{value:"100"}},[t._v("100")])])]),t._v(" "),r("span",[t._v(t._s(t.total&&t.curPage)+"/"+t._s(t.total))]),t._v(" "),r("div",{staticClass:"goto"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.gotoPage,expression:"gotoPage"}],attrs:{type:"text"},domProps:{value:t.gotoPage},on:{input:function(e){e.target.composing||(t.gotoPage=e.target.value)}}}),t._v(" "),r("button",{staticClass:"btn btn-primary",staticStyle:{"margin-right":"4px"},on:{click:t.gotoNextPage}},[t._v("\n      跳转\n    ")])])])}),[],!1,null,"7a6ad211",null);e.a=component.exports},207:function(t,e,r){"use strict";var n=r(4),c=(r(36),r(199)),o={name:"ArticleItem",props:{article:{type:Object,default:function(){return{}}}},created:function(){this.$set(this.article,"disabled",!1)},methods:{jumpToProfile:function(t){this.$router.push({path:"/profile",query:{username:t}})},handleOrCancelFavorite:function(article){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.article.disabled){e.next=2;break}return e.abrupt("return");case 2:if(t.article.disabled=!0,!article.favorited){e.next=9;break}t.cancelFavoriteArticle(article.slug),article.favorited=!1,article.favoritesCount-=1,e.next=13;break;case 9:return e.next=11,t.favoriteArticle(article.slug);case 11:article.favorited=!0,article.favoritesCount+=1;case 13:t.article.disabled=!1;case 14:case"end":return e.stop()}}),e)})))()},favoriteArticle:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Object(c.b)(t)}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})))()},cancelFavoriteArticle:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},handlePreviewArticle:function(article){this.$router.push({path:"/article",query:{slug:article.slug}})}}},l=r(30),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"article-meta"},[r("div",{staticStyle:{display:"inline-block"},on:{click:function(e){return t.jumpToProfile(t.article.author.username)}}},[r("span",[r("img",{attrs:{src:t.article.author.image}})]),t._v(" "),r("div",{staticClass:"info"},[r("span",{staticClass:"author"},[t._v(t._s(t.article.author.username))]),t._v(" "),r("span",{staticClass:"date"},[t._v(t._s(t._f("date")(t.article.createdAt,"MMM DD,YYYY")))])])]),t._v(" "),r("button",{staticClass:"btn btn-sm btn-outline-primary pull-xs-right",class:t.article.favorited?"active":"",attrs:{disabled:t.article.disabled},on:{click:function(e){return t.handleOrCancelFavorite(t.article)}}},[r("i",{staticClass:"ion-heart"}),t._v(" "+t._s(t.article.favoritesCount)+"\n    ")])]),t._v(" "),r("div",{staticClass:"preview-link",on:{click:function(e){return t.handlePreviewArticle(t.article)}}},[r("h1",[t._v(t._s(t.article.title))]),t._v(" "),r("p",[t._v(t._s(t.article.description))]),t._v(" "),r("span",[t._v("Read more...")])])])}),[],!1,null,null,null);e.a=component.exports},208:function(t,e,r){"use strict";r.r(e);var n=r(83);var c=r(116),o=r(62);function l(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||Object(c.a)(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=r(4),article=(r(36),r(199)),v=r(206),d=r(207),h={name:"HomeIndex",components:{Pagination:v.a,ArticleItem:d.a},data:function(){return{tags:[],tabMap:{your:"Your Feed",global:"Global Feed",dynamic:""},curSelectTab:"Global Feed",curPage:1,pageSize:10,totalPages:0,articlesCount:0,articles:[]}},created:function(){this.getTagList(),this.getGlobalFeedArticleList()},computed:{isLogin:function(){return this.$store.state.user.token}},methods:{getTagList:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(article.g)();case 3:r=e.sent,n=r.tags,t.tags=l(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},changeTab:function(t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.isLogin){r.next=2;break}return r.abrupt("return",e.$router.push("/login"));case 2:return e.curSelectTab=t,"Your Feed"!==t&&"Global Feed"!==t||(e.tabMap.dynamic=""),r.next=6,e.initArticlesOfTab(t);case 6:case"end":return r.stop()}}),r)})))()},handleSelectTag:function(t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.isLogin){r.next=2;break}return r.abrupt("return",e.$router.push("/login"));case 2:return e.tabMap.dynamic=t,e.curSelectTab=t,r.next=6,e.getTagArticle(1,e.pageSize,t);case 6:case"end":return r.stop()}}),r)})))()},setPage:function(t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.curPage=t,r.next=3,e.initArticlesOfTab(e.curSelectTab,e.curPage-1);case 3:case"end":return r.stop()}}),r)})))()},setOffset:function(t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.pageSize=t,e.curPage=1,r.next=4,e.initArticlesOfTab(e.curSelectTab,e.curPage-1,e.pageSize);case 4:case"end":return r.stop()}}),r)})))()},getYourFeedArticle:function(t,e){var r=this;return Object(f.a)(regeneratorRuntime.mark((function n(){var c,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(article.h)({limit:e,offset:t});case 3:c=n.sent,o=c.articles,l=c.articlesCount,r.articles=o,r.totalPages=Math.ceil(l/r.pageSize),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},getTagArticle:function(t,e,r){var n=this;return Object(f.a)(regeneratorRuntime.mark((function c(){var o,l,f;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(article.f)({limit:e,offset:t,tag:r});case 3:o=c.sent,l=o.articles,f=o.articlesCount,n.articles=l,n.totalPages=Math.ceil(f/n.pageSize),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(0),console.error(c.t0);case 13:case"end":return c.stop()}}),c,null,[[0,10]])})))()},getGlobalFeedArticleList:function(){var t=arguments,e=this;return Object(f.a)(regeneratorRuntime.mark((function r(){var n,c,o,l,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:0,c=t.length>1&&void 0!==t[1]?t[1]:10,r.prev=2,r.next=5,Object(article.e)({limit:c,offset:n});case 5:o=r.sent,l=o.articles,f=o.articlesCount,e.articles=l,e.articlesCount=f,e.totalPages=Math.ceil(f/e.pageSize),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(2),console.error(r.t0);case 16:case"end":return r.stop()}}),r,null,[[2,13]])})))()},initArticlesOfTab:function(t){var e=arguments,r=this;return Object(f.a)(regeneratorRuntime.mark((function n(){var c,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=e.length>1&&void 0!==e[1]?e[1]:0,o=e.length>2&&void 0!==e[2]?e[2]:10,n.t0=t,n.next="Global Feed"===n.t0?5:"Your Feed"===n.t0?8:11;break;case 5:return n.next=7,r.getGlobalFeedArticleList(c,o);case 7:return n.abrupt("break",14);case 8:return n.next=10,r.getYourFeedArticle(c,o);case 10:return n.abrupt("break",14);case 11:return n.next=13,r.getTagArticle(c,o,t);case 13:return n.abrupt("break",14);case 14:case"end":return n.stop()}}),n)})))()}}},m=r(30),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home-page"},[t._m(0),t._v(" "),r("div",{staticClass:"container page"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-9"},[r("div",{staticClass:"feed-toggle"},[r("ul",{staticClass:"nav nav-pills outline-active"},t._l(t.tabMap,(function(e){return r("li",{key:e||"hello",staticClass:"nav-item",on:{click:function(r){return t.changeTab(e)}}},[e?r("span",{staticClass:"nav-link",class:t.curSelectTab===e&&"active"},[t._v(t._s(e))]):t._e()])})),0)]),t._v(" "),t._l(t.articles,(function(article){return r("div",{key:article.slug,staticClass:"article-preview"},[r("ArticleItem",{attrs:{article:article}})],1)})),t._v(" "),r("div",[r("Pagination",{attrs:{pageSize:t.pageSize,total:t.totalPages,curPage:t.curPage},on:{setPage:t.setPage,setOffset:t.setOffset}})],1)],2),t._v(" "),r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"sidebar"},[r("p",[t._v("Popular Tags")]),t._v(" "),r("div",{staticClass:"tag-list"},t._l(t.tags,(function(e,n){return r("span",{key:n,staticClass:"tag-pill tag-default",on:{click:function(r){return t.handleSelectTag(e)}}},[t._v(t._s(e))])})),0)])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"banner"},[r("div",{staticClass:"container"},[r("h1",{staticClass:"logo-font"},[t._v("conduit")]),t._v(" "),r("p",[t._v("A place to share your knowledge.")])])])}],!1,null,null,null);e.default=component.exports}}]);